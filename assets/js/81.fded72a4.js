(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{385:function(t,a,e){"use strict";e.r(a);var r=e(22),s=Object(r.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"promise使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#promise使用"}},[t._v("#")]),t._v(" Promise使用")]),t._v(" "),e("h6",{attrs:{id:"promise优点-解决回调地狱的问题-链式书写-方便阅读和维护"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#promise优点-解决回调地狱的问题-链式书写-方便阅读和维护"}},[t._v("#")]),t._v(" Promise优点:解决回调地狱的问题,链式书写,方便阅读和维护")]),t._v(" "),e("h6",{attrs:{id:"语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语法"}},[t._v("#")]),t._v(" 语法:")]),t._v(" "),e("h6",{attrs:{id:"结构：new-promise-resolve-rejected-异步函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#结构：new-promise-resolve-rejected-异步函数"}},[t._v("#")]),t._v(" 结构：new Promise((resolve,rejected)=>{ ...异步函数... })")]),t._v(" "),e("h6",{attrs:{id:"resolve-data-成功的回调"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resolve-data-成功的回调"}},[t._v("#")]),t._v(" resolve(data)   //成功的回调")]),t._v(" "),e("h6",{attrs:{id:"rejected-e-throw-err-失败的回调"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rejected-e-throw-err-失败的回调"}},[t._v("#")]),t._v(" rejected(e) == throw err //失败的回调")]),t._v(" "),e("h6",{attrs:{id:"promise对象的数据获取"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#promise对象的数据获取"}},[t._v("#")]),t._v(" promise对象的数据获取")]),t._v(" "),e("h6",{attrs:{id:"方式1-then-data-err"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方式1-then-data-err"}},[t._v("#")]),t._v(" 方式1: .then( data =>{  ... },err => { ... } )")]),t._v(" "),e("h6",{attrs:{id:"方式2-then-data-catch-e"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方式2-then-data-catch-e"}},[t._v("#")]),t._v(" 方式2: .then( data => { ... }).catch( e=>{ ... } )")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("const dns = require('dns')\n\nfunction main(ip){\n    let p =new Promise((resolve,rejected)=>{\n        dns.resolve(ip,(err,records)=>{\n            if(err) {\n                rejected(err)\n            }else{\n                resolve(records)\n            }\n        })\n    })\n    return p;\n}\n\nmain('www.qq.com').then(data=>{\n    console.log(data)\n}).catch(e=>{\n    console.log(e);\n})\n")])])]),e("h2",{attrs:{id:"使用util-promisify"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用util-promisify"}},[t._v("#")]),t._v(" 使用util.promisify")]),t._v(" "),e("h6",{attrs:{id:"util-promisify-异步函数-直接将异步函数封装为promise的对象"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#util-promisify-异步函数-直接将异步函数封装为promise的对象"}},[t._v("#")]),t._v(" util.promisify(异步函数) // 直接将异步函数封装为Promise的对象")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("const util = require('util')\n\nconst request = require('request')\n\nlet get = util.promisify(request.get)\n\nget('http://www.baidu.com').then(data=>{\n    console.log(data.headers);\n})\n")])])]),e("h2",{attrs:{id:"async-await的使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#async-await的使用"}},[t._v("#")]),t._v(" async/await的使用")]),t._v(" "),e("h4",{attrs:{id:"关键点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关键点"}},[t._v("#")]),t._v(" 关键点")]),t._v(" "),e("h6",{attrs:{id:"_1-await-后面是promise对象，则获取到的就是成功的值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-await-后面是promise对象，则获取到的就是成功的值"}},[t._v("#")]),t._v(" 1. await 后面是promise对象，则获取到的就是成功的值")]),t._v(" "),e("h6",{attrs:{id:"_2-await-后面是普通对象，则获取到的就是普通对象的值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-await-后面是普通对象，则获取到的就是普通对象的值"}},[t._v("#")]),t._v(" 2. await 后面是普通对象，则获取到的就是普通对象的值")]),t._v(" "),e("h6",{attrs:{id:"_3-await-后面的是reject或者throw异常的，则需要通过catch来获取"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-await-后面的是reject或者throw异常的，则需要通过catch来获取"}},[t._v("#")]),t._v(" 3.await 后面的是reject或者throw异常的，则需要通过catch来获取")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("const util = require('util')\n\nconst request = require('request')\n\nlet get = util.promisify(request.get)\n\nasync function doGet(){\n    var data = await get('http://www.baidu.com')\n    console.log(data.headers)\n    console.log(data.body)\n    console.log(data.statusCode)\n}\n\ndoGet()\n")])])])])}),[],!1,null,null,null);a.default=s.exports}}]);