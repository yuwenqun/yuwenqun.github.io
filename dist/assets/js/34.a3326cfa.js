(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{337:function(e,t,a){"use strict";a.r(t);var s=a(22),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[e._v("#")]),e._v(" 说明")]),e._v(" "),a("h4",{attrs:{id:"支持扑捉协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持扑捉协议"}},[e._v("#")]),e._v(" 支持扑捉协议")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ICMP (v4 and v6)\nDNS\nHTTP\nAMQP 0.9.1\nCassandra\nMysql \nPostgreSQL\nRedis\nThrift-RPC\nMongoDB\nMemcache\nTLS\n")])])]),a("h4",{attrs:{id:"支持的condition："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持的condition："}},[e._v("#")]),e._v(" 支持的condition：")]),e._v(" "),a("ul",[a("li",[e._v("equals")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("  equals:\n  http.response.code: 200\n")])])]),a("ul",[a("li",[e._v("contains")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('contains:\n  status: "Specific error"\n')])])]),a("ul",[a("li",[e._v("regexp")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('regexp:\n  system.process.name: "foo.*"\n')])])]),a("ul",[a("li",[e._v("range")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("range:\n    http.response.code:\n        gte: 400\n\nrange:\n    system.cpu.user.pct.gte: 0.5\n    system.cpu.user.pct.lt: 0.8\n")])])]),a("ul",[a("li",[e._v("or")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("or:\n  - <condition1>\n  - <condition2>\n  - <condition3>\n\nor:\n  - equals:\n      http.response.code: 304\n  - equals:\n      http.response.code: 404\n")])])]),a("ul",[a("li",[e._v("and")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("http.response.code = 200 AND status = OK:\n\n\nand:\n  - equals:\n      http.response.code: 200\n  - equals:\n      status: OK\n")])])]),a("ul",[a("li",[e._v("not")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("NOT status = OK\n\nnot:\n  equals:\n    status: OK\n")])])]),a("h4",{attrs:{id:"支持的processors"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持的processors"}},[e._v("#")]),e._v(" 支持的processors:")]),e._v(" "),a("ul",[a("li",[e._v("add_cloud_metadata")]),e._v(" "),a("li",[e._v("add_locale")]),e._v(" "),a("li",[e._v("decode_json_fields")]),e._v(" "),a("li",[e._v("drop_event")]),e._v(" "),a("li",[e._v("drop_fields")]),e._v(" "),a("li",[e._v("include_fields")]),e._v(" "),a("li",[e._v("add_kubernetes_metadata")]),e._v(" "),a("li",[e._v("add_docker_metadata")])]),e._v(" "),a("h2",{attrs:{id:"举例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#举例"}},[e._v("#")]),e._v(" 举例")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('packetbeat.interfaces.device: any\npacketbeat.interfaces.type: af_packet // af_packet提高数据表扑获性能\npacketbeat.interfaces.buffer_size_mb: 100  // af_packet缓存内存大小\npacketbeat.ignore_outgoing: true  // Packetbeat将忽略从运行Packetbeat的服务器发起的所有事务\npacketbeat.interfaces.internal_networks:\n  - private\npacketbeat.flows:\n  timeout: 30s\n  period: 10s\n  enabled: false  //禁用\npacketbeat.protocols:\n- type: http\n  ports: [80, 8080, 8000, 5000, 8002]\n  split_cookie: true\n  send_all_headers: true\n  send_request: true   // 记录请求\n  send_response: true  // 记录响应\n  include_body_for: ["text/html","text/plain","text/xml","application/xhtml+xml","application/xml","application/atom+xml","application/json"]\n  processors:\n  - drop_event:  // 没有这个x-author-pabum请求头时丢弃事件\n     when:\n       not:\n         regexp:\n           http.request.headers.x-author-pabum: ".*"\nsetup.template.settings:\n  index.number_of_shards: 1\noutput.elasticsearch:\n  hosts: ["172.16.117.1:9200"]\n\n')])])])])}),[],!1,null,null,null);t.default=n.exports}}]);